<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>The Mid-World Library - BookList</title>
    <link rel="stylesheet" th:href="@{/css/books.css}"/>
</head>
<body>
    <header>
        <h2 class="logo">Mid-World Library</h2>

        <nav class="navbar">
            <li sec:authorize="hasAuthority('ADMIN')">
                <a th:href="@{/userlist}">
                    Users
                </a>
            </li>
            <li sec:authorize="hasAuthority('ADMIN')">
                <a th:href="@{/booklist}">
                    Books
                </a>
            </li>
            <li class="last">
                <div class="user-info">
                    <img th:src="@{/images/user.jpg}" class="user-img"/>
                    <p sec:authentication="principal.username"></p>
                </div>
                <form action="#" th:action="@{/logout}" method="GET">
                    <button type="submit" class="logout">Logout</button>
                </form>
            </li>
        </nav>
    </header>

    <section class="table-container">

        <h3 class="heading">Book List</h3>

        <table>
            <thead>
                <tr>
                    <th>book id</th>
                    <th>title</th>
                    <th>author</th>
                    <th>isbn</th>
                    <th>publisher</th>
                    <th>category</th>
                    <th>total Copies</th>
                    <th>available copies</th>
                    <th>Update</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="book : ${books}">
                    <td th:text="${book.bookId}"/>
                    <td th:text="${book.title}" />
                    <td th:text="${book.author}"/>
                    <td th:text="${book.isbn}"/>
                    <td th:text="${book.publisher}"/>
                    <td th:text="${book.category}"/>
                    <td th:text="${book.totalCopies}">
                    <td th:text="${book.availableCopies}">
                    <td>
                    <div class="edit">
                        <a class="edit-btn" th:href="@{/updateBook(bookId=${book.bookId})}">Edit</a>
                        <a class="edit-btn delete" th:href="@{/deleteBook(bookId=${book.bookId})}"
                           onclick="if (!(confirm('Are you sure you want to delete this employee?'))) return false">
                            Drop
                        </a>
                    </div>
                </td>
                </tr>
            </tbody>
        </table>

        <a th:href="@{/addBook}" class="add">Add a new book</a>

    </section>

    <div>
        <a th:href="@{/}" class="back">Back to Home Page</a>
    </div>

</body>
</html>